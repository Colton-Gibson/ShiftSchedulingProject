{% extends "base.html" %}

{% block title %}Shift Planner{% endblock %}

{% block stylesheets %}

{% endblock %}

{% block content %}
<h1>Shift Planner</h1>

<form action="/switchShifts" method="POST" id="shiftSelection">
	<label for="calendar">Select a date:</label>
	<input type="date" id="calendar" name="calendar" onchange="autoClick()" value="{{ selected_date|default('') }}">

	<label for="selectedShift">Shift:</label>
	<select id="selectedShift" name="selectedShift" onchange="autoClick()">
		{% for shift in shifts %}
		<option value="{{ shift.id }}" id="shift{{ shift.id }}" {% if selected_shift_id==shift.id %} selected {%endif%}>
			{{ shift.display }}</option>
		{% endfor %}
	</select>
	<ul id="dayShift" class="selectedEmployees">
		{% for employee_id, employee_info in emps.items() %}
		<li>{{ employee_info.first }} {{ employee_info.last }}</li>
		{% endfor %}
	</ul>
	<button type="submit" id="submitShift" display="none">Submit</button>
</form><br>
<form action="/makeAssignments" method="POST" id="shiftAssignment">
	{% for station in stations %}
	<label for="{{ station.id }}">{{ station.station }}</label>
	<select id="{{ station.id }}">
		<!-- Populate the dropdown menu with employees -->
		{% for employee_id, employee_info in emps.items() %}
		<option value="{{ employee_id }}">{{ employee_info.first }} {{ employee_info.last }}</option>
		{% endfor %}
	</select>
	<ul id="{{ station.station }}Employees" class="selectedEmployees">
		<!-- Display the selected employees for each station -->
	</ul>
	{% endfor %}

	<button type="submit">Submit</button>
</form>
<ul id="unassignedEmployees" class="selectedEmployees">
	<li><b><u>Unassigned Employees</u></b></li>
	{% for employee_id, employee_info in emps.items() %}
	<li>{{ employee_info.first }} {{ employee_info.last }}</li>
	{% endfor %}
</ul>
{% endblock %}

{% block scripts %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="/static/ajax.js"></script>
<script>
	function autoClick() {
		if (document.getElementById("calendar").value != "") {
			document.getElementById("submitShift").click()
		}
	}
</script>
{% endblock %}